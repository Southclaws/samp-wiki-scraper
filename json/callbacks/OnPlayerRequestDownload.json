{"name": "OnPlayerRequestDownload", "tags": ["player"], "kind": "callbacks", "notes": null, "warnings": null, "versions": "This callback was added in SA-MP 0.3.DL R1 and will not work in earlier versions!", "tips": null, "outdated": null, "lowercase": null, "description": "This callback is called when a player request for custom model downloads.", "params_title": "(playerid, type, crc)", "params_body": [{"name": "playerid", "description": "The ID of the player that request custom model download."}, {"name": "type", "description": "The type of the request (see below)."}, {"name": "crc", "description": "The CRC checksum of custom model file."}], "return_values": " 0 - Deny the download request\n\n 1 - Accept the download request", "pawn_code": ["#define DOWNLOAD_REQUEST_EMPTY\t\t0\n#define DOWNLOAD_REQUEST_MODEL_FILE\t1\n#define DOWNLOAD_REQUEST_TEXTURE_FILE\t2", "new baseurl[] = \"https://files.sa-mp.com/server\";\n\u00a0\npublic OnPlayerRequestDownload(playerid, type, crc)\n{\n\tnew fullurl[256+1];\n\tnew dlfilename[64+1];\n\tnew foundfilename=0;\n\u00a0\n\tif(!IsPlayerConnected(playerid)) return 0;\n\u00a0\n\tif(type == DOWNLOAD_REQUEST_TEXTURE_FILE) {\n\t\tfoundfilename = FindTextureFileNameFromCRC(crc,dlfilename,64);\n\t}\n\telse if(type == DOWNLOAD_REQUEST_MODEL_FILE) {\n\t\tfoundfilename = FindModelFileNameFromCRC(crc,dlfilename,64);\n\t}\n\u00a0\n\tif(foundfilename) {\n\t\tformat(fullurl,256,\"%s/%s\",baseurl,dlfilename);\n\t\tRedirectDownload(playerid,fullurl);\n\t}\n\u00a0\n\treturn 0;\n}"], "code": [], "related_fn": [" OnPlayerFinishedDownloading: Called when a player finishes downloading custom models.\n"], "related_cb": [" OnPlayerFinishedDownloading: Called when a player finishes downloading custom models.\n"]}