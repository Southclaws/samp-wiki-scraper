{"name": "OnPlayerGiveDamage", "tags": ["player"], "kind": "callbacks", "notes": "\nKeep in mind this function can be inaccurate in some cases.\nIf you want to prevent certain players from damaging eachother, use SetPlayerTeam.\nThe weaponid will return 37 (flame thrower) from any fire sources (e.g. molotov, 18)\nThe weaponid will return 51 from any weapon that creates an explosion (e.g. RPG, grenade)\nplayerid is the only one who can call the callback.\nThe amount is always the maximum damage the weaponid can do, even when the health left is less than that maximum damage. So when a player has 100.0 health and gets shot with a Desert Eagle which has a damage value of 46.2, it takes 3 shots to kill that player. All 3 shots will show an amount of 46.2, even though when the last shot hits, the player only has 7.6 health left.\n\n", "warnings": null, "versions": "This callback was added in SA-MP 0.3d and will not work in earlier versions!", "tips": null, "outdated": null, "lowercase": null, "description": "This callback is called when a player gives damage to another player.", "params_title": "(playerid, damagedid, Float:amount, weaponid, bodypart)", "params_body": [{"name": "playerid", "description": "The ID of the player that gave damage."}, {"name": "damagedid", "description": "The ID of the player that received damage."}, {"name": "amount", "description": "The amount of health/armour damagedid has lost (combined)."}, {"name": "weaponid", "description": "The reason that caused the damage."}, {"name": "bodypart", "description": "The body part that was hit. (NOTE: This parameter was added in 0.3z. Leave it out if using an older version!)"}], "return_values": " 1 - Callback will not be called in other filterscripts.\n\n 0 - Allows this callback to be called in other filterscripts.\n\n It is always called first in filterscripts so returning 1 there blocks other filterscripts from seeing it.", "pawn_code": ["public OnPlayerGiveDamage(playerid, damagedid, Float:amount, weaponid, bodypart)\n{\n    new string[128], victim[MAX_PLAYER_NAME], attacker[MAX_PLAYER_NAME];\n    new weaponname[24];\n    GetPlayerName(playerid, attacker, sizeof (attacker));\n    GetPlayerName(damagedid, victim, sizeof (victim));\n\u00a0\n    GetWeaponName(weaponid, weaponname, sizeof (weaponname));\n    format(string, sizeof(string), \"%s has made %.0f damage to %s, weapon: %s, bodypart: %d\", attacker, amount, victim, weaponname, bodypart);\n    SendClientMessageToAll(0xFFFFFFFF, string);\n    return 1;\n}"], "code": [], "related_fn": [], "related_cb": ["OnPlayerTakeDamage: This callback is called when a player takes damage.\n", " OnPlayerWeaponShot: Called when a player fires a weapon.\n"]}