{"name": "OnDialogResponse", "tags": [], "kind": "callbacks", "notes": "Parameters can contain different values, based on dialog's style (click for more examples).", "warnings": "A player's dialog doesn't hide when the gamemode restarts, causing the server to print \"Warning: PlayerDialogResponse PlayerId: 0 dialog ID doesn't match last sent dialog ID\" if a player responded to this dialog after restart.", "versions": "This callback was added in SA-MP 0.3a and will not work in earlier versions!", "tips": "It is appropriate to switch through different dialogids, if you have many.", "outdated": null, "lowercase": null, "description": "This callback is called when a player responds to a dialog shown using ShowPlayerDialog by either clicking a button, pressing ENTER/ESC or double-clicking a list item (if using a list style dialog).", "params_title": "(playerid, dialogid, response, listitem, inputtext[])", "params_body": [{"name": "playerid", "description": "The ID of the player that responded to the dialog."}, {"name": "dialogid", "description": "The ID of the dialog the player responded to, assigned in ShowPlayerDialog."}, {"name": "response", "description": "1 for left button and 0 for right button (if only one button shown, always 1)"}, {"name": "listitem", "description": "The ID of the list item selected by the player (starts at 0) (only if using a list style dialog, otherwise will be -1)."}, {"name": "inputtext[]", "description": "The text entered into the input box by the player or the selected list item text."}], "return_values": " It is always called first in filterscripts so returning 1 there blocks other filterscripts from seeing it.", "pawn_code": ["// Define the dialog ID so we can handle responses\n#define DIALOG_RULES 1\n\u00a0\n// In some command\nShowPlayerDialog(playerid, DIALOG_RULES, DIALOG_STYLE_MSGBOX, \"Server Rules\", \"- No Cheating\\n- No Spamming\\n- Respect Admins\\n\\nDo you agree to these rules?\", \"Yes\", \"No\");\n\u00a0\npublic OnDialogResponse(playerid, dialogid, response, listitem, inputtext[])\n{\n    if(dialogid == DIALOG_RULES)\n    {\n        if(response) // If they clicked 'Yes' or pressed enter\n        {\n            SendClientMessage(playerid, COLOR_GREEN, \"Thank you for agreeing to the server rules!\");\n        }\n        else // Pressed ESC or clicked cancel\n        {\n            Kick(playerid);\n        }\n        return 1; // We handled a dialog, so return 1. Just like OnPlayerCommandText.\n    }\n\u00a0\n    return 0; // You MUST return 0 here! Just like OnPlayerCommandText.\n}", "#define DIALOG_LOGIN 2\n\u00a0\n// In some command\nShowPlayerDialog(playerid, DIALOG_LOGIN, DIALOG_STYLE_INPUT, \"Login\", \"Please enter your password:\", \"Login\", \"Cancel\");\n\u00a0\npublic OnDialogResponse(playerid, dialogid, response, listitem, inputtext[])\n{\n    if(dialogid == DIALOG_LOGIN)\n    {\n        if(!response) // If they clicked 'Cancel' or pressed esc\n        {\n            Kick(playerid);\n        }\n        else // Pressed ENTER or clicked 'Login' button\n        {\n            if(CheckPassword(playerid, inputtext))\n            {\n                SendClientMessage(playerid, COLOR_RED, \"You are now logged in!\");\n            }\n            else\n            {\n                SendClientMessage(playerid, COLOR_RED, \"LOGIN FAILED.\");\n\u00a0\n                // Re-show the login dialog\n                ShowPlayerDialog(playerid, DIALOG_LOGIN, DIALOG_STYLE_INPUT, \"Login\", \"Please enter your password:\", \"Login\", \"Cancel\");\n            }\n        }\n        return 1; // We handled a dialog, so return 1. Just like OnPlayerCommandText.\n    }\n\u00a0\n    return 0; // You MUST return 0 here! Just like OnPlayerCommandText.\n}", "#define DIALOG_WEAPONS 3\n\u00a0\n// In some command\nShowPlayerDialog(playerid, DIALOG_WEAPONS, DIALOG_STYLE_LIST, \"Weapons\", \"Desert Eagle\\nAK-47\\nCombat Shotgun\", \"Select\", \"Close\");\n\u00a0\npublic OnDialogResponse(playerid, dialogid, response, listitem, inputtext[])\n{\n    if(dialogid == DIALOG_WEAPONS)\n    {\n        if(response) // If they clicked 'Select' or double-clicked a weapon\n        {\n            // Give them the weapon\n            switch(listitem)\n            {\n                case 0: GivePlayerWeapon(playerid, WEAPON_DEAGLE, 14); // Give them a desert eagle\n                case 1: GivePlayerWeapon(playerid, WEAPON_AK47, 120); // Give them an AK-47\n                case 2: GivePlayerWeapon(playerid, WEAPON_SHOTGSPA, 28); // Give them a Combat Shotgun\n            }\n        }\n        return 1; // We handled a dialog, so return 1. Just like OnPlayerCommandText.\n    }\n\u00a0\n    return 0; // You MUST return 0 here! Just like OnPlayerCommandText.\n}", "#define DIALOG_WEAPONS 3\n\u00a0\n// In some command\nShowPlayerDialog(playerid, DIALOG_WEAPONS, DIALOG_STYLE_LIST, \"Weapons\",\n\"Weapon\\tAmmo\\tPrice\\n\\\nM4\\t120\\t500\\n\\\nMP5\\t90\\t350\\n\\\nAK-47\\t120\\t400\",\n\"Select\", \"Close\");\n\u00a0\npublic OnDialogResponse(playerid, dialogid, response, listitem, inputtext[])\n{\n    if(dialogid == DIALOG_WEAPONS)\n    {\n        if(response) // If they clicked 'Select' or double-clicked a weapon\n        {\n            // Give them the weapon\n            switch(listitem)\n            {\n                case 0: GivePlayerWeapon(playerid, WEAPON_M4, 120); // Give them an M4\n                case 1: GivePlayerWeapon(playerid, WEAPON_MP5, 90); // Give them an MP5\n                case 2: GivePlayerWeapon(playerid, WEAPON_AK47, 120); // Give them an AK-47\n            }\n        }\n        return 1; // We handled a dialog, so return 1. Just like OnPlayerCommandText.\n    }\n\u00a0\n    return 0; // You MUST return 0 here! Just like OnPlayerCommandText.\n}"], "code": [], "related_fn": [" ShowPlayerDialog: Show a dialog to a player.\n"], "related_cb": []}