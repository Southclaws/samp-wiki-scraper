{"name": "OnPlayerWeaponShot", "tags": ["player"], "kind": "callbacks", "notes": "\n This callback is only called when lag compensation is enabled.\n If hittype is:\n\n- BULLET_HIT_TYPE_NONE: the fX, fY and fZ parameters are normal coordinates, will give 0.0 for coordinates if nothing was hit (e.g. far object that the bullet can't reach);\n- Others: the fX, fY and fZ are offsets relative to the hitid.", "warnings": "Known Bug(s):\n Isn't called if you fired in vehicle as driver or if you are looking behind with the aim enabled (shooting in air).\n It is called as BULLET_HIT_TYPE_VEHICLE with the correct hitid (the hit player's vehicleid) if you are shooting a player which is in a vehicle. It won't be called as BULLET_HIT_TYPE_PLAYER at all. [Click here for a possible fix]\n Partially fixed in SA-MP 0.3.7: If fake weapon data is sent by a malicious user, other player clients may freeze or crash. To combat this, check if the reported weaponid can actually fire bullets.", "versions": "This callback was added in SA-MP 0.3z and will not work in earlier versions!", "tips": "GetPlayerLastShotVectors can be used in this callback for more detailed bullet vector information.", "outdated": null, "lowercase": null, "description": "This callback is called when a player fires a shot from a weapon. Only bullet weapons are supported. Only passenger drive-by is supported (not driver drive-by, and not sea sparrow / hunter shots).", "params_title": "(playerid, weaponid, hittype, hitid, Float:fX, Float:fY, Float:fZ)", "params_body": [{"name": "playerid", "description": "The ID of the player that shot a weapon."}, {"name": "weaponid", "description": "The ID of the weapon shot by the player."}, {"name": "hittype", "description": "The type of thing the shot hit (none, player, vehicle, or (player)object)."}, {"name": "hitid", "description": "The ID of the player, vehicle or object that was hit."}, {"name": "fX", "description": "The X coordinate that the shot hit."}, {"name": "fY", "description": "The Y coordinate that the shot hit."}, {"name": "fZ", "description": "The Z coordinate that the shot hit."}], "return_values": " 0 - Prevent the bullet from causing damage.\n\n 1 - Allow the bullet to cause damage.\n\n It is always called first in filterscripts so returning 0 there also blocks other scripts from seeing it.", "pawn_code": ["public OnPlayerWeaponShot(playerid, weaponid, hittype, hitid, Float:fX, Float:fY, Float:fZ)\n{\n    new szString[144];\n    format(szString, sizeof(szString), \"Weapon %i fired. hittype: %i   hitid: %i   pos: %f, %f, %f\", weaponid, hittype, hitid, fX, fY, fZ);\n    SendClientMessage(playerid, -1, szString);\n    return 1;\n}"], "code": [], "related_fn": [" GetPlayerLastShotVectors: Retrieves the vector of the last shot a player fired.\n"], "related_cb": ["OnPlayerGiveDamage: This callback is called when a player gives damage.\n", " GetPlayerLastShotVectors: Retrieves the vector of the last shot a player fired.\n"]}