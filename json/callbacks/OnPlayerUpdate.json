{"name": "OnPlayerUpdate", "tags": ["player"], "kind": "callbacks", "notes": "This callback can also be called by NPC.", "warnings": "\nThis callback is called, on average, 30 times per second, per player; only use it when you know what it's meant for (or more importantly what it's NOT meant for).\nThe frequency with which this callback is called for each player varies, depending on what the player is doing. Driving or shooting will trigger a lot more updates than idling. \n\n", "versions": null, "tips": null, "outdated": null, "lowercase": null, "description": "This callback is called every time a client/player updates the server with their status. It is often used to create custom callbacks for client updates that aren't actively tracked by the server, such as health or armor updates or players switching weapons.", "params_title": "(playerid)", "params_body": [{"name": "playerid", "description": "ID of the player sending an update packet."}], "return_values": " 0 - Update from this player will not be replicated to other clients.\n\n 1 - Indicates that this update can be processed normally and sent to other players.\n\n It is always called first in filterscripts.", "pawn_code": ["public OnPlayerUpdate(playerid)\n{\n    new iCurWeap = GetPlayerWeapon(playerid); // Return the player's current weapon\t\t\n    if(iCurWeap\u00a0!= GetPVarInt(playerid, \"iCurrentWeapon\")) // If he changed weapons since the last update\n    {\n        // Lets call a callback named OnPlayerChangeWeapon\n        OnPlayerChangeWeapon(playerid, GetPVarInt(playerid, \"iCurrentWeapon\"), iCurWeap);\n        SetPVarInt(playerid, \"iCurrentWeapon\", iCurWeap);//Update the weapon variable\n    }\n    return 1; // Send this update to other players.\n}\n\u00a0\nstock OnPlayerChangeWeapon(playerid, oldweapon, newweapon)\n{\n\tnew     s[128],\n\t\toWeapon[24],\n\t\tnWeapon[24];\n\u00a0\n\tGetWeaponName(oldweapon, oWeapon, sizeof(oWeapon));\n\tGetWeaponName(newweapon, nWeapon, sizeof(nWeapon));\n\u00a0\n\tformat(s, sizeof(s), \"You changed weapon from %s to %s!\", oWeapon, nWeapon);\n\u00a0\n\tSendClientMessage(playerid, 0xFFFFFFFF, s);\n}", "public OnPlayerUpdate(playerid)\n{\n\tnew Float:fHealth;\n\u00a0\n\tGetPlayerHealth(playerid, fHealth);\n\u00a0\n\tif(fHealth\u00a0!= GetPVarFloat(playerid, \"faPlayerHealth\"))\n\t{\n\t    // Player health has changed since the last update -> server, so obviously thats the thing updated.\n\t    // Lets do further checks see if he's lost or gained health, anti-health cheat?\u00a0;)\n\u00a0\n\t    if(fHealth > GetPVarFloat(playerid, \"faPlayerHealth\"))\n\t    {\n\t        /* He has gained health! Cheating? Write your own scripts here to figure how a player\n\t\t\tgained health! */\n\t    }\n\t    else\n\t    {\n\t        /* He has lost health! */\n\t    }\n\u00a0\n\t    SetPVarFloat(playerid, \"faPlayerHealth\", fHealth);\n\t}\n}"], "code": [], "related_fn": [], "related_cb": []}